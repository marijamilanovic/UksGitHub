{% extends 'home/index.html' %}
{% load static %}
{% load bootstrap_icons %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{% block title %} UksGithub {% endblock %}</title>
    <link rel="stylesheet" type="text/css" href="{% static 'home/style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>

<body>
    {% block content %}

    <head>
      <link defer rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
<script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script>
    </head>

    <div style="background-color:  rgb(243, 243, 243); height: 60px;">
    <span style="margin-left: 20px;">{% bs_icon 'pc-display-horizontal' size='1em' %}</span>
    <a href="{% url 'profile' %}" style="font-size: large; margin-left: 5px; margin-top: 15px; display:inline-block;"> {{repository.creator}} </a>
    <span style="font-size: large;">/</span>
    <a href="#" style="font-size: large; margin-left: 0px; margin-top: 15px; display:inline-block;"> {{repository.name}} </a>
    <span class="badge badge-pill badge-success d-inline-flex align-items-center justify-content-center"
    style="font-size: 0.8em; margin-left: 10px; height: 22px;" >{{repository.status}}
    </span>
    <div style="margin-left: 1150px; margin-top: -20px;">
    <a href="{% url 'watchRepository' id=repository.id  %}" class="btn btn-outline-secondary btn-sm" style="width: 100px;  color: black;"><span style="margin-left: -4px;  ">{% bs_icon 'eye' size='1.1em' %}</span> Watch <span class="badge badge-success">{{watchers|length}}</span></a>
    <a href="#"  class="btn btn-outline-secondary btn-sm" style="width: 100px; margin-left: 10px; color: black;"><span style="margin-left: -4px; ">{% bs_icon 'diagram-2' size='1.1em' %} </span> Fork <span class="badge badge-success">0</span></a>
    {% if stargazers %}
    <a href="{% url 'starRepository' id=repository.id  %}"  class="btn btn-outline-secondary btn-sm" style="width: 100px;margin-left: 10px;color: black;"><span style="margin-left: -4px; color:orange">{% bs_icon 'star-fill' size='1.1em' %} </span>  Star <span class="badge badge-success">{{stargazers|length}}</span></a>
    {% else %}
    <a href="{% url 'starRepository' id=repository.id  %}"  class="btn btn-outline-secondary btn-sm" style="width: 100px;margin-left: 10px;color: black;"><span style="margin-left: -4px; color: grey;">{% bs_icon 'star-fill' size='1.1em' %} </span>  Star <span class="badge badge-success">{{stargazers|length}}</span></a>
    {% endif %}
    </div>
    </div>

    <ul class="nav" style="background-color: rgb(243, 243, 243);">
      {% block navCode %}
      <li class="nav-item">
        <a class="nav-link active" style="border-bottom:3px solid darkviolet; color: black;" id="code" href="{% url 'repository' id=repository.id %}" aria-current="page">{% bs_icon 'code' size='1em' %} Code</a>
      </li>
      {% endblock %}

      {% block navIssues %}
      <li class="nav-item">
        <a class="nav-link"  id="issues" style="color: black;" href="{% url 'issues' id=repository.id  %}">{% bs_icon 'record-circle' size='1em' %} Issues</a>
      </li>
      {% endblock %}

      {% block navMilestones %}
      <li class="nav-item">
        <a class="nav-link" id="milestones" style="color: black;" href="{% url 'milestones' id=repository.id  %}">{% bs_icon 'signpost' size='1em' %} Milestones</a>
      </li>
      {% endblock %}

      {% block navLabels %}
      <li class="nav-item">
        <a class="nav-link" id="labels" style="color: black;" href="{% url 'labels' id=repository.id  %}"> {% bs_icon 'tag' size='1.3em' %} Labels</a>
      </li>
      {% endblock %}

      {% block navPullRequests %}
      <li class="nav-item">
        <a class="nav-link" id="pullRequests" style="color: black;" href="{% url 'pullrequests' id=repository.id  %}">{% bs_icon 'shuffle' size='1.3em' %} Pull requests</a>
      </li>
      {% endblock %}
    </ul>

    {% block page_content %}
    <div class="container">
      <div class="row">
        <div class="col">
        <!--Left part of the page-->  
          <div class="code">
            <div class="code-item1" style="margin-left: -48px;">
              <span class="iconify" data-icon="fa-solid:code-branch"></span>
              <select class="selectpicker" data-live-search="true" data-size="5" onchange="location = this.value">
                {% for branch in branch_list.all  %}
                  <option value="{% url 'repo_branch' id=repository.id branch_id=branch.id %}" {% if branch.id == selected_branch.id %} selected {% endif %}>
                  {{branch.name}} 
                  </option>
                </a>
                {% endfor %}
              </select>
              <span style="margin-left: 3%;"><a style="color: black;" href="{% url 'branch:repoBranchList' id=repository.id  %}"><span class="iconify" data-icon="fa-solid:code-branch" style="margin-right: 1%;"></span>{{branch_list|length}} branches</a></span> 
            </div>
            
          </div>

          <div class="card" style="height: 400px;">
            <div class="card-header">
              Bice nesto
              <a style="color: black;" href="{% url 'commit:commitList' id=selected_branch.id  %}">
              <span style="margin-left: 500px;" class="iconify" data-icon="si-glyph:time-reload" data-width="22" data-height="20"></span>
              <span>{{commit_list|length}} commits</span> </a>
            </div>
            <div class="card-body">
              
            </div>
          </div>

        </div>
      <!--Right part of the page-->   
        <div class="col-lg-4">
          <h5 style="margin-top: 20px;">About</h5>
          <div class="col">
          <a href="{% url 'stargazers' id=repository.id  %}"  style="margin-left: -15px; color:black;">{% bs_icon 'star' size='1.1em' %} {{stargazers|length}} stars</a> 
          </div>
          <div class="col" style="margin-top: 5px;">
            <a href="{% url 'watchers' id=repository.id  %}" style="margin-left: -15px;color:black;">{% bs_icon 'eye' size='1.1em' %} {{watchers|length}} watching</a> 
          </div>
          <div class="col" style="margin-top: 5px;">
            <a href="#" style="margin-left: -15px;color: black; ">{% bs_icon 'diagram-2' size='1.1em' %}  0 forks </a>
          </div>
          <hr style="margin-top: 20px;">
          <h5 style="margin-top: 20px;">Contributors</h5>
      </div>

      </div>
    </div>
    {%endblock%}  
    {%endblock%}   
</body>