{% extends 'repository/index.html' %}
{% load static %}
{% load bootstrap_icons %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static 'home/style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>

<body>
    {% block navCode %}
      <li class="nav-item">
        <a class="nav-link active" href="{% url 'repository' id=repository.id %}" style= "color: black;" id="code" aria-current="page">{% bs_icon 'code' size='1em' %} Code</a>
      </li>
    {% endblock %}

    {% block navIssues %}
      <li class="nav-item">
        <a class="nav-link"  id="issues" style="border-bottom:3px solid darkviolet;color: black;" href="{% url 'issues' id=repository.id  %}">{% bs_icon 'record-circle' size='1em' %} Issues</a>
      </li>
    {% endblock %}

    {% block page_content %}
    <div class="tab-pane container active" id="issues">
    <h2 style="margin-top: -20px;">New issue</h2>
        <form style="margin-top: 20px; margin-left: -12px;" method="POST" action="{% url 'add_issue' %}"> 
            {% csrf_token %}
            <div style="margin-left: 600px;position: absolute;">
                <!-- ASSIGNEES -->
                Assignees:
                <br>
                <select name="developers_id" style="min-width:100px;border-radius: 6px;border: 2px solid #AAA;box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.1);">
                    <option value="empty"></option>
                    {% for u in users %}
                        {% if u.username == issue.assignee %}
                            <option value="{{ u.username }}" selected>{{ u.username }}</option>
                        {% else %}
                            <option value="{{ u.username }}">{{ u.username }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <hr color='gray' style=" box-shadow: 0 0 2px 0.5px gray;">
                Labels:
                <br>
                <select name="cars" id="cars">
                    <option value="masha"> todo</option>
                </select>
                <hr color='gray' style=" box-shadow: 0 0 2px 0.5px gray;">
                Projects:
                <br>
                <select name="cars" id="cars">
                    <option value="masha"> todo</option>
                </select>
                <hr color='gray' style=" box-shadow: 0 0 2px 0.5px gray;">
                <!-- MILESTONE -->
                Milestone:
                <br>
                <select name="milestone_id" style="min-width:100px;border-radius: 6px;border: 2px solid #AAA;box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.1);">
                    <option value="empty"></option>
                    {% for m in milestones %}
                        {% if m.id == issue.milestone.id %}
                            <option value="{{ m.id }}" selected>{{ m.title }} {{m.due_date}}</option>
                        {% else %}
                            <option value="{{ m.id }}">{{ m.title }} {{m.due_date}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <hr color='gray' style=" box-shadow: 0 0 2px 0.5px gray;">
                Linked pull request:
                <br>
                <select name="cars" id="cars">
                    <option value="masha"> todo</option>
                </select>   
            </div>

            <input type="hidden" name="repository"  value="{{repository.id}}"/>
            <div class="form-group col-md-6">
                <h5>Title</h5> 
                <input type="text" class="form-control" id="title" name="title" value="{{ title }}">
            </div>
      
            {% if errorTitle %}
            <div style="color: red; margin-left: 14px;" >{{errorTitle}}</div>
            {% endif %}
            <div class="form-group col-md-6">
                <h5 for="description">Description</h5>
                <textarea class="form-control col-md-12" id="description" rows="4" name="description"></textarea>
            </div>

            <input type="submit" style="margin-left: 12px; margin-top: 5px;"  class="btn btn-success" value="Create">
        </form>
    </div>  
    {% endblock %}
</body>
</html>